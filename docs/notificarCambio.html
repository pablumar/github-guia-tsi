<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE HTML>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>
    <title>Notificar Cambio - Guía de Implementación Tarjeta Sanitaria Individual (TSI) v1.0.0</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content="http://hl7.org/fhir"/>

    <link href="fhir.css" rel="stylesheet"/>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap-fhir.css" rel="stylesheet"/>

    <!-- Project extras -->
    <link href="assets/css/project.css" rel="stylesheet"/>
    <link href="assets/css/pygments-manni.css" rel="stylesheet"/>
    <link href="assets/css/jquery-ui.css" rel="stylesheet"/>
  	<link href="assets/css/prism.css" rel="stylesheet" />
  	<link href="assets/css/cqf.css" rel="stylesheet" />
    <!-- Placeholder for child template CSS declarations -->

    <script type="text/javascript" src="fhir-table-scripts.js"> </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="fhir-logo" sizes="144x144" href="assets/ico/icon-fhir-144.png"/>
    <link rel="fhir-logo" sizes="114x114" href="assets/ico/icon-fhir-114.png"/>
    <link rel="fhir-logo" sizes="72x72" href="assets/ico/icon-fhir-72.png"/>
    <link rel="fhir-logo" href="assets/ico/icon-fhir-57.png"/>
    <link rel="shortcut icon" href="assets/ico/favicon.png"/>
  </head>
  <body onload="document.body.style.opacity='1'">

	  <script src="assets/js/prism.js"></script>
    <script type="text/javascript" src="assets/js/mermaid.js"></script>
    <script type="text/javascript" src="assets/js/mermaid-init.js"></script>
    <style type="text/css">h2{--heading-prefix:"15"}
    h3,h4,h5,h6{--heading-prefix:"15"}</style>
    <div id="segment-header" class="segment">  <!-- segment-header -->
      <div class="container">  <!-- container -->

        <!-- Placeholder for child template header declarations -->

<div>
  <table width="100%">
    <tr >
      <td align="center">
        <img src="assets/images/logoGlobal.png">
      </td>
    </tr>
  </table>

        <div id="ig-status">
          <p><span style="font-size:12pt;font-weight:bold">Guía de Implementación Tarjeta Sanitaria Individual (TSI)</span>
            <br/>
            <span style="display:inline-block;">1.0.0 - R4


            </span>
          </p>
        </div>
      </div> <!-- /container -->
    </div>  <!-- /segment-header -->

    <div id="segment-navbar" class="segment">  <!-- segment-navbar -->
      <div id="stripe"> </div>
      <div class="container">  <!-- container -->
        <!-- HEADER CONTENT -->

        <nav class="navbar navbar-inverse">
          <!--status-bar-->
          <div class="container">
            <button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
              <span class="icon-bar"> </span>
            </button>
            <a class="navbar-brand hidden" href="http://hl7.org/fhir/R4/index.html">FHIR</a>
            <div class="nav-collapse collapse navbar-inverse-collapse">
              <!-- menu.xml  -->

<ul xmlns="http://www.w3.org/1999/xhtml" class="nav navbar-nav">
  <li>
    <a href="index.html">Introducción</a>
  </li>
  <li>
    <a href="toc.html">Listado de Contenidos</a>
  </li>
  <li>
    <a href="diagramaSec.html">Diagrama de Secuencia</a>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Escenarios
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="llamadaConsulta.html">Consulta de Ciudadanos</a>
      </li>
      <li>
        <a href="llamadaAlta.html">Alta Ciudadanos</a>
      </li>
      <li>
        <a href="llamadaModificacion.html">Modificacion Ciudadanos</a>
      </li>
      <li>
        <a href="llamadaBaja.html">Baja Ciudadanos</a>
      </li>
      <li>
        <a href="llamadaNotificar.html">Notificar Cambio</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Implementación
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="consultarCiudadano.html">Consulta de Ciudadanos</a>
      </li>
      <li>
        <a href="consultarCiudadanoEuropeo.html">Consulta de Ciudadano Europeo</a>
      </li>
      <li>
        <a href="altaCiudadano.html">Alta Ciudadanos</a>
      </li>
      <li>
        <a href="modificarCiudadano.html">Modificacion Ciudadanos</a>
      </li>
      <li>
        <a href="bajaCiudadano.html">Baja Ciudadanos</a>
      </li>
      <li>
        <a href="notificarCambio.html">Notificar Cambio</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Artefactos
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="artifacts.html">Listado</a>
      </li>
      <li>
        <a href="mapeo.html">Mapeos</a>
      </li>
      <li>
        <a href="terminologias.html">Terminologias</a>
      </li>
      <li>
        <a href="seguridad.html">Seguridad</a>
      </li>
    </ul>
  </li>
  <li class="dropdown">
    <a data-toggle="dropdown" href="#" class="dropdown-toggle">Support
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="http://hl7.org/fhir/R4/index.html">FHIR Spec</a>
      </li>
    </ul>
  </li>
</ul>
            </div>  <!-- /.nav-collapse -->
          </div>  <!-- /.container -->
        </nav>  <!-- /.navbar -->
      <!-- /HEADER CONTENT -->
      </div>  <!-- /container -->
    </div>  <!-- /segment-navbar -->
    <!--status-bar-->

    <div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
      <div class="container">  <!-- container -->
        <ul class="breadcrumb">
          <li><a href='toc.html'><b>Table of Contents</b></a></li><li><b>Notificar Cambio</b></li>

        </ul>
      </div>  <!-- /container -->
    </div>  <!-- /segment-breadcrumb -->

    <a name="top"> </a>
    <div id="segment-content" class="segment">  <!-- segment-content -->
      <div class="container">  <!-- container -->
        <div class="row">
          <div class="inner-wrapper">

<style type="text/css">
h2:before{color:silver;counter-increment:section;content:var(--heading-prefix) " ";}
h3:before{color:silver;counter-increment:sub-section;content:var(--heading-prefix) "." counter(sub-section) " ";}
h4:before{color:silver;counter-increment:composite;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) " ";}
h5:before{color:silver;counter-increment:detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) " ";}
h6:before{color:silver;counter-increment:more-detail;content:var(--heading-prefix) "." counter(sub-section) "." counter(composite) "." counter(detail) "." counter(more-detail)" ";}
</style>
<div class="col-12">
  <!--ReleaseHeader--><p id="publish-box">Guía de Implementación Tarjeta Sanitaria Individual (TSI) - Local Development build (v1.0.0) built by the FHIR (HL7® FHIR® Standard) Build Tools. See the <a href="http://example.com/fhir/example/history.html">Directory of published versions</a></p><!--EndReleaseHeader-->
  <h2>Notificar Cambio</h2>
  












    <p><!-- white space is critical inside of capture --></p>
<div>
<!-- do not remove - needed to prevent Jekyll from adding a p tag to any non block level element in the markdown.-->
</div>
<p><strong>Descripción del Escenario:</strong></p>
<p>En TSI se da uno de los dos casos siguientes:</p>
<ul>
<li><p>Se recibe un fichero por parte del INSS para actualizar los datos
de un grupo de pacientes. Dichero fichero se procesa correctamente y los
pacientes son actualizados, en este caso se envía una notificación
N010.</p></li>
<li><p>Se recibe una modificación por parte de una CA que necesita
actualizar los datos de un paciente. En este caso la notificación a
enviar es la notificación N005.</p></li>
</ul>
<p>Cualquier de los dos escenarios antes mencionados genera una
notificación que debe ser enviada a cada una de las CCAA en las que
tiene historia clínica el paciente, esto se determina por las
referencias existentes en HCDSNS_BE.</p>
<p>Esta notificación enviada contiene el recurso FHIR Patient modificado
con una operación PUT.</p>
<p>La notificación será enviada desde TSI_BE a la CA donde está adscrito
el ciudadano. Algunas notificaciones se envían a las CA en las que haya
estado el ciudadano, o en la que está de temporalidad… Cada destino
depende del tipo de notificación a enviar.</p>
<p>Las notificaciones contempladas son las siguientes:</p>
<ul>
<li><p><strong>N001: Notificación baja de usuario</strong></p></li>
</ul>
<blockquote>
<p>Notifica la baja por defunción de un ciudadano. En las bajas
procedentes del ministerio de justicia se notificará a las comunidades
de residencia y/o de fallecimiento la baja del usuario, siempre que no
se haya encontrado en el sistema.</p>
</blockquote>
<ul>
<li><p><strong>N002: Notificación de traspaso</strong></p></li>
</ul>
<blockquote>
<p>Notifica la baja en un servicio de salud, como resultado del traspaso
de un usuario entre Servicios Regionales de Salud.</p>
</blockquote>
<ul>
<li><p><strong>N003: Notificación de comunicación de
temporalidad</strong></p></li>
</ul>
<blockquote>
<p>Notificación del registro de temporalidad de un usuario en un
Servicio de Salud distinto al propio al que está adscrito.</p>
</blockquote>
<ul>
<li><p><strong>N005: Notificación de Respuesta Resultado
Operación</strong></p></li>
</ul>
<blockquote>
<p>Notifica al origen de una operación la correcta realización de la
misma. Será una notificación que contesta de manera asíncrona a una
operación de: modificación A003, baja A002 o temporalidad A004.</p>
</blockquote>
<ul>
<li><p><strong>N006: Notificación de fin de
temporalidad</strong></p></li>
</ul>
<blockquote>
<p>Notifica la finalización de un periodo de desplazamiento temporal.
Esta notificación se envía a los Servicios Regionales de Salud
implicados: Al que está inscrito el usuario, y a aquel en el que el
usuario está registrado como desplazado temporal.</p>
<p>Se activa si:</p>
</blockquote>
<ul>
<li><p>Expira el tiempo establecido para la temporalidad</p></li>
<li><p>Se recibe un mensaje de modificación de la Comunidad donde el
usuario está adscrito.</p></li>
<li><p>Se recibe un mensaje de alta de otra Comunidad autónoma a la que
está adscrito el usuario</p></li>
</ul>
<ul>
<li><p><strong>N007: Notificación de cambio de
codificación</strong></p></li>
</ul>
<blockquote>
<p>Notifica a los agentes del sistema la actualización de una tabla de
codificación. Este procedimiento notifica que tabla ha cambiado, que
operación se ha realizado (alta, baja o modificación), los campos
afectados y sus valores.</p>
<p>El cambio de codificación se realizará por el Servicio de Tarjeta
Sanitaria.</p>
</blockquote>
<ul>
<li><p><strong>N009: Notificación de respuesta gestión cip y alta
online.</strong></p></li>
</ul>
<blockquote>
<p>Notifica de manera síncrona el COD_USUARIO_SNS asignado al usuario
mandado, o el COD_USUARIO_SNS encontrado para ese usuario, en el caso de
que ya estuviera dado de alta, o los posibles usuarios encontrados.</p>
</blockquote>
<ul>
<li><p><strong>N010: Notificación de discrepancia</strong></p></li>
</ul>
<blockquote>
<p>Notifica de manera asíncrona la discrepancia en la información de un
usuario entre la recibida de los Servicios de Salud y la recibida de la
Seguridad Social.</p>
</blockquote>
<ul>
<li><p><strong>N011: Notificación de baja por
duplicidad</strong></p></li>
</ul>
<blockquote>
<p>Notificación de baja por duplicidad de un usuario que había
pertenecido a ese Agente. Se le indica el código SNS que ha provocado la
baja por duplicidad</p>
</blockquote>
<ul>
<li><p><strong>N013: Notificación Movimiento Mutualista
Privado</strong></p></li>
</ul>
<blockquote>
<p>Este mensaje se envía como Notificación, a los diferentes Agentes,
para indicar los movimientos de los Mutualistas Privados que se
encuentran residentes dentro de su ámbito territorial.</p>
<p>Para determinar a qué agente se envía la notificación se tendrá en
cuenta la provincia de residencia, según indica el código postal del
usuario.</p>
<p>En el caso de que se produzca un cambio del dato de Código Postal del
usuario, que signifique un traspaso de domicilio a otro agente, se
comunicara un N013 con estado a 1_BAJA EN SERVICIO DE SALUD hacia el
agente de residencia anterior del mutualista privado. Y se lanzara un
N013 con los datos del mutualista privado hacia el agente donde vaya a
residir.</p>
</blockquote>
<p>Las notificaciones que no aparecen en este listado serían
notificaciones que se consideran obsoletas.</p>
<p><strong>Operación involucrada:</strong>
<em>/Patient/idPatient</em></p>
<p><strong>Ejemplo:</strong></p>
<ul>
<li><p><strong>Solicitud</strong>: Desde TSI_BE se envía una
notificación a las CCAA involucradas invocando para ello el siguiente
endpoint en la CA tratada en cada caso.</p></li>
</ul>
<p><em>PUT /Patient/BBBBBBBBBB009933</em></p>
<table border="1">
<colgroup>
<col style="width: 31%" />
<col style="width: 26%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;"><strong>Acciones</strong></th>
<th style="text-align: center;"><strong>Interfaz</strong></th>
<th style="text-align: center;"><strong>RequestBody</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><p>UPDATE</p>
<p>Esta acción implica la actualización de un recurso de paciente
existente en el sistema de salud. Se espera que se proporcionen los
datos actualizados del paciente, que pueden incluir cambios en la
información demográfica, correcciones de errores o actualizaciones de
estados.</p>
<p>Por ejemplo: Actualizar la dirección de un paciente en el sistema de
salud después de que haya cambiado de domicilio, proporcionando la nueva
dirección y actualizando el registro correspondiente del paciente o
informando de un traslado temporal.</p></td>
<td>PUT [base]/fhir/Patient/patient123</td>
<td><p>{</p>
<p>"resourceType": "Patient",</p>
<p>"id": "usuario123",</p>
<p>"identifier": [</p>
<p>{</p>
<p>"system": "http://example.org/sns",</p>
<p>"value": "123456789"</p>
<p>}</p>
<p>],</p>
<p>"name": [</p>
<p>{</p>
<p>"family": "Luque",</p>
<p>"given": ["Juan"]</p>
<p>}</p>
<p>],</p>
<p>"gender": "hombre",</p>
<p>"birthDate": "1980-01-01",</p>
<p>"address": [</p>
<p>{</p>
<p>"use": "home",</p>
<p>"city": "Sevilla"</p>
<p>}</p>
<p>]</p>
<p>}</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>Respuesta correcta esperada (Notificación)</strong>:</p>
<ul>
<li><p><strong>Código de Estado</strong>: 200 OK</p></li>
</ul></li>
<li><p><strong>Respuesta incorrecta:</strong></p>
<ul>
<li><p><strong>Cabecera HTTP</strong></p></li>
<li><p><strong>OperationOutcome</strong>:</p></li>
</ul></li>
</ul>
<table border="1">
<colgroup>
<col style="width: 100%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;"><p>{</p>
<p>"resourceType": "OperationOutcome",</p>
<p>"issue": [</p>
<p>{</p>
<p>"severity": "error",</p>
<p>"code": "not-found",</p>
<p>"diagnostics": "Error en el proceso de baja"</p>
<p>}</p>
<p>]</p>
<p>}</p></th>
</tr>
</thead>
<tbody>
</tbody>
</table>



</div>
        </div>  <!-- /inner-wrapper -->
      </div>  <!-- /row -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-content -->

  <script type="text/javascript" src="assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
  <script type="text/javascript" src="assets/js/jquery-ui.min.js"> </script>

  <script type="text/javascript" src="assets/js/window-hash.js"> </script>
  <a name="bottom"> </a>
  <div id="segment-footer" igtool="footer" class="segment">  <!-- segment-footer -->
    <div class="container">  <!-- container -->

      <div class="inner-wrapper">
        <p>
          IG &#169; 2024+ <a style="color:var(--footer-hyperlink-text-color)" href="https://sns.gob.es">SNS</a>.  Package tsi.sns.implementationGuide#1.0.0 based on <a style="color: var(--footer-hyperlink-text-color)" href="http://hl7.org/fhir/R4/">FHIR 4.0.1</a>. Generated <span title="Wed, Feb 19, 2025 12:43+0100">2025-02-19</span>
          <br/>
          <span style="color: var(--footer-highlight-text-color)">
                      Links: <a style="color: var(--footer-hyperlink-text-color)" href="toc.html">Table of Contents</a> |
                 <a style="color: var(--footer-hyperlink-text-color)" href="qa.html">QA Report</a>
                 
                
          </span>
        </p>
      </div>  <!-- /inner-wrapper -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-footer -->
  
  <div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
    <div class="container">  <!-- container -->
    </div>  <!-- /container -->
  </div>  <!-- /segment-post-footer -->

  <!-- JS and analytics only. -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script type="text/javascript" src="assets/js/bootstrap.min.js"> </script>
  <script type="text/javascript" src="assets/js/respond.min.js"> </script>
  <script type="text/javascript" src="assets/js/anchor.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard.min.js"> </script>
  <script type="text/javascript" src="assets/js/clipboard-btn.js"> </script>
  <script type="text/javascript" src="assets/js/anchor-hover.js"> </script>
  <!-- Analytics Below
  ================================================== -->
  </body>
</html>

